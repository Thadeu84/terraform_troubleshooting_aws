<!DOCTYPE html><html lang="en"><head>

</a></li></ol></nav></span><header class="tutorial-meta_header__tOUwp"><h1 id="troubleshooting-workflow" class="hds-typography-display-600 hds-font-weight-bold tutorial-meta_heading___aCZj g-offset-scroll-margin-top">Troubleshoot Terraform</h1><div class="tutorial-meta_meta__4IXgk"><ul class="badges_list__q_WyI"><li><p class="badges_readTime__CGDB_ hds-font-weight-medium hds-typography-display-100"></p></li><li><span class="g-screen-reader-only"></span><span aria-hidden="true" class="badge_root__LCJF3 badge_medium__6uSjM badge_filled-neutral__5Spxj"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="#7B42BC" fill-rule="evenodd" clip-rule="evenodd"><path d="M5.825 2.82l4.35 2.524v5.052L5.825 7.87V2.82zM10.651 5.344v5.052L15 7.87V2.82l-4.349 2.524zM1 0v5.05l4.349 2.527V2.526L1 0zM5.825 13.474L10.174 16v-5.051L5.825 8.423v5.051z"></path></g></svg><span></span></span></li></ul><span class="tutorial-meta_buttonGroup__1frpO"><button class="button_root__eSBLF hds-font-weight-medium button_medium__uIVG8 button_secondary__KpNHc" data-heap-track="button " type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M7.75 4a.75.75 0 01.75.75V6h1.25a.75.75 0 010 1.5H8.5v1.25a.75.75 0 01-1.5 0V7.5H5.75a.75.75 0 010-1.5H7V4.75A.75.75 0 017.75 4z"></path><path fill-rule="evenodd" d="M2 3.25A2.25 2.25 0 014.25 1h7.5A2.25 2.25 0 0114 3.25v10.83a1 1 0 01-1.478.878L8.12 12.564a.25.25 0 00-.238 0l-4.403 2.394A1 1 0 012 14.08V3.25zm2.25-.75a.75.75 0 00-.75.75v9.989l3.664-1.992a1.75 1.75 0 011.672 0l3.664 1.992V3.25a.75.75 0 00-.75-.75h-7.5z" clip-rule="evenodd"></path></g></svg><span>Add bookmark</span></button></span></div></header><span data-ref-id="44b32a13-f6f6-457a-8bd4-bfc0a8eb2d64_cddd2334-0dfe-460b-94f0-85ba377acca8"></span><div class="dev-dot-content_root__PM7Rc hds-typography-body-300"><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The primary method for interacting with Terraform is the HashiCorp Configuration Language (HCL). When Terraform encounters an error in your configuration, it will report an error including line numbers and the type of issue found in the configuration.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In this tutorial, you will clone a repository with a broken Terraform configuration to deploy an EC2 instance and underlying networking. This configuration contains intentional errors to introduce you to troubleshooting the configuration language.</p><h2 id="prerequisites" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="prerequisites permalink" href="#prerequisites"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Prerequisites</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">For this tutorial, you will need:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/terraform/tutorials/aws-get-started/install-cli">Terraform 0.15.2+</a> installed locally</li><li class="mdx-lists_listItem__2Palk">an <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://portal.aws.amazon.com/billing/signup?nc2=h_ct&amp;src=default&amp;redirect_url=https%3A%2F%2Faws.amazon.com%2Fregistration-confirmation#/start">AWS account</a> with credentials <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs#authentication">configured for Terraform</a></li></ul><h2 id="review-the-terraform-troubleshooting-model" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="review the terraform troubleshooting model permalink" href="#review-the-terraform-troubleshooting-model"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Review the Terraform troubleshooting model</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ"><span class="image_root__MMhvi"><img src="https://content.hashicorp.com/api/assets?product=tutorials&amp;version=main&amp;asset=public%2Fimg%2Fterraform%2Ftroubleshooting%2Ftf-layers.png" alt="The Terraform application layers"/></span></p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">There are four potential types of issues that you could experience with Terraform: language, state, core, and provider errors. Starting from the type of error closest to the user:</p><ol class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><strong>Language errors</strong>: The primary interface for Terraform is the HashiCorp Configuration Language (HCL), a declarative configuration language. The Terraform core application interprets the configuration language. When Terraform encounters a syntax error in your configuration, it prints out the line numbers and an explanation of the error.</li><li class="mdx-lists_listItem__2Palk"><strong>State errors</strong>: The Terraform state file stores information on provisioned resources. It maps resources to your configuration and tracks all associated metadata. If state is out of sync, Terraform may destroy or change your existing resources. After you rule out configuration errors, review your state. Ensure your configuration is in sync by refreshing, importing, or replacing resources.</li><li class="mdx-lists_listItem__2Palk"><strong>Core errors</strong>: The Terraform core application contains all the logic for operations. It interprets your configuration, manages your state file, constructs the resource dependency graph, and communicates with provider plugins. Errors produced at this level may be a bug. Later in this tutorial, you will learn best practices for opening a GitHub issue for the core development team.</li><li class="mdx-lists_listItem__2Palk"><strong>Provider errors</strong>: The provider plugins handle authentication, API calls, and mapping resources to services. Later in this tutorial, you will learn best practices for opening a GitHub issue for the provider development team.</li></ol><h2 id="clone-the-github-example-repository" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="clone the github example repository permalink" href="#clone-the-github-example-repository"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Clone the GitHub example repository</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Clone the <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://github.com/hashicorp/learn-terraform-troubleshooting">example GitHub repository</a>.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token function">git</span> clone https://github.com/hashicorp/learn-terraform-troubleshooting.git</span></span>

</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Change into the repository directory.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">cd</span> learn-terraform-troubleshooting</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Open the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">main.tf</code> file in your file editor.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">This configuration includes intentional problems and you may find some issues immediately, but do not edit your configuration yet. In the next section, you will run the format command to identify errors.</p><h2 id="format-the-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="format the configuration permalink" href="#format-the-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Format the configuration</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The format command scans the current directory for configuration files and rewrites your Terraform configuration files to the <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/terraform/language/syntax/style">recommended format</a>.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In your terminal, run the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform fmt</code> command. This command returns two errors informing you of an invalid character and an invalid expression. Both errors occur on line 46.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform <span class="token function">fmt</span></span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Error: Invalid character</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> on main.tf line 46, in resource &quot;aws_instance&quot; &quot;web_app&quot;:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> 46: Name = $var.name-learn</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">This character is not used within the language.</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Error: Invalid expression</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">  on main.tf line 46, in resource &quot;aws_instance&quot; &quot;web_app&quot;:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">  46:     Name = $var.name-learn</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Expected the start of an expression, but found an invalid expression token.</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Terraform found problems that it could not parse, and output errors so you can fix the configuration manually.</p><h2 id="correct-a-variable-interpolation-error" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="correct a variable interpolation error permalink" href="#correct-a-variable-interpolation-error"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Correct a variable interpolation error</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">main.tf</code>, find the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_instance.web_app</code> resource&#x27;s <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">tags</code> attribute on line 46. The <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">Name</code> tag is incorrectly formatted. It is trying to append a string to the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">name</code> input variable without the necessary interpolation syntax. Update the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">Name</code> attribute with the correct syntax.</p><div class="g-code-block style_root__rglDp language-diff mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code">##...<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  tags = {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     Name = $var.name-learn</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     Name = &quot;${var.name}-learn&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">##...<!-- -->
</span></span></span></code></pre></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Run <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform fmt</code> again to ensure your variable name meets the formatting requirements.</p><div class="g-code-block style_root__rglDp language-shell-sesion mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-sesion mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-sesion mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">$ terraform fmt<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">You resolved the invalid character and expression errors, and they don&#x27;t appear again. Terraform parses <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">&quot;${var.name}-learn&quot;</code> as your variable name in the interpolation shorthand with the hardcoded <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">-learn</code> string appended to form a custom value.</p><h2 id="validate-your-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="validate your configuration permalink" href="#validate-your-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Validate your configuration</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform fmt</code> only parses your HCL for interpolation errors or malformed resource definitions, which is why you should use <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform validate</code> after formatting your configuration to check your configuration in the context of the providers&#x27; expectations.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Initialize your Terraform directory to download the providers that your configuration requires.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform init</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Run <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform validate</code> in your terminal. The output contains a cycle error that highlights a mutual dependency between two security group resources.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform validate</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Error: Cycle: aws_security_group.sg_ping, aws_security_group.sg_8080</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Cycle errors are instances of circular logic in the Terraform dependency tree. Terraform analyzes the dependencies between resources in your infrastructure configuration to determine the order to perform your operations.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In the next section, you will correct this dependency graph error.</p><h2 id="correct-a-cycle-error" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="correct a cycle error permalink" href="#correct-a-cycle-error"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Correct a cycle error</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Your <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_security_group</code> resources reference one another in their <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">security_groups</code> attributes. AWS cannot create the security groups because their configurations each reference the other group, which would not exist yet.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Remove the mutually dependent security group rules in your configuration, leaving the two group resources without ingress attributes.</p><div class="g-code-block style_root__rglDp language-diff mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">resource &quot;aws_security_group&quot; &quot;sg_ping&quot; {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  name = &quot;Allow Ping&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  ingress {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    from_port       = -1</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    to_port         = -1</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    protocol        = &quot;icmp&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    security_groups = [aws_security_group.sg_8080.id]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  }</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">resource &quot;aws_security_group&quot; &quot;sg_8080&quot; {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  name = &quot;Allow 8080&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  ingress {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    from_port       = 8080</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    to_port         = 8080</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    protocol        = &quot;tcp&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    security_groups = [aws_security_group.sg_ping.id]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  }</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // connectivity to ubuntu mirrors is required to run `apt-get update` and `apt-get install apache2`</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  egress {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    from_port   = 0</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    to_port     = 0</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    protocol    = &quot;-1&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  }</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span>
</span></span></span></code></pre></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Instead of including the rules in the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_security_group</code> configuration, use the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_security_group_rule</code> resource and reference the security group IDs instead. This avoids a cycle error because the provider will have AWS create both of the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_security_group</code> resources first, without interdependent rules. It will create the rules next, and attach the rules to the groups last.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Add the new, independent rule resource configurations to <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">main.tf</code>.</p><div class="g-code-block style_root__rglDp language-hcl mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token keyword">resource <span class="token type variable">&quot;aws_security_group_rule&quot;</span></span> <span class="token string">&quot;allow_ping&quot;</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;ingress&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">from_port</span> <span class="token punctuation">=</span> -<span class="token number">1</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">to_port</span> <span class="token punctuation">=</span> -<span class="token number">1</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">protocol</span> <span class="token punctuation">=</span> <span class="token string">&quot;icmp&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">security_group_id</span> <span class="token punctuation">=</span> aws_security_group.sg_ping.id<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">source_security_group_id</span> <span class="token punctuation">=</span> aws_security_group.sg_8080.id<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token keyword">resource <span class="token type variable">&quot;aws_security_group_rule&quot;</span></span> <span class="token string">&quot;allow_8080&quot;</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;ingress&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">from_port</span> <span class="token punctuation">=</span> <span class="token number">80</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">to_port</span> <span class="token punctuation">=</span> <span class="token number">80</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">protocol</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">security_group_id</span> <span class="token punctuation">=</span> aws_security_group.sg_8080.id<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">source_security_group_id</span> <span class="token punctuation">=</span> aws_security_group.sg_ping.id<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Terraform does not continue validating once it catches an error. Run the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform validate</code> command to catch new errors: an invalid reference a the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> attribute because of a splat expression (<code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">*</code>) in its value.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform validate</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Error: Invalid reference</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> on main.tf line 44, in resource &quot;aws*instance&quot; &quot;web_app&quot;:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> 44: for_each = aws_security_group.*.id</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">A reference to a resource type must be followed by at least one attribute</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">access, specifying the resource name.</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Error: Invalid &quot;each&quot; attribute</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> on main.tf line 47, in resource &quot;aws*instance&quot; &quot;web_app&quot;:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> 47: vpc_security_group_ids = [each.id]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">The &quot;each&quot; object does not have an attribute named &quot;id&quot;. The supported</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">attributes are each.key and each.value, the current key and value pair of the</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">&quot;for_each&quot; attribute set.</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">each</code> attribute in the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">vpc_security_group_ids</code> cannot return the IDs because of the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> error above it. Terraform did not return any security group IDs, so the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">each</code> object is invalid.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Review the construction of the instance resource.</p><div class="g-code-block style_root__rglDp language-hcl mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token keyword">resource <span class="token type variable">&quot;aws_instance&quot;</span></span> <span class="token string">&quot;web_app&quot;</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token property">for_each</span> <span class="token punctuation">=</span> aws_security_group.*.id<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token property">ami</span> <span class="token punctuation">=</span> data.aws_ami.ubuntu.id<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token property">instance_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;t2.micro&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token property">vpc_security_group_ids</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>each.id<span class="token punctuation">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token property">user_data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token heredoc string"> #!/bin/bash</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token heredoc string"> apt-get update</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token heredoc string"> apt-get install -y apache2</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token heredoc string"> sed -i -e &#x27;s/80/8080/&#x27; /etc/apache2/ports.conf</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token heredoc string"> echo &quot;Hello World&quot; &gt; /var/www/html/index.html</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token heredoc string"> systemctl restart apache2</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token heredoc string"> EOF</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token property">Name</span> <span class="token punctuation">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">name</span><span class="token punctuation">}</span></span>-learn&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">   <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"> <span class="token punctuation">}</span>
</span></span></span></code></pre></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Terraform cannot automatically convert types without additional functions.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In the next section, you will correct this expression and <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> error.</p><h2 id="correct-a-for_each-error" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="correct a for_each error permalink" href="#correct-a-for_each-error"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Correct a <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> error</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Terraform&#x27;s <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> attribute allows you to create a set of similar resources based on the criteria you define.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In this example, you need to create a set of similar instances, each assigned to a different security group. Terraform cannot parse <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_security_group.*.id</code> in this attribute because the splat expression <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">(*)</code> only interpolates list types, while the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> attribute is reserved for map types. A local value can return a map type.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">main.tf</code>, on line 44, replace the value of the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> attribute with a local value. On line 47, replace the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">vpc_security_group_ids</code> value with the value from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> attribute. Finally, update the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">tags</code> attribute to give each instance a unique name.</p><div class="g-code-block style_root__rglDp language-diff mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code">resource &quot;aws_instance&quot; &quot;web_app&quot; {<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  for_each               = aws_security_group.*.id</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  for_each               = local.security_groups</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  ami                    = data.aws_ami.ubuntu.id</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  instance_type          = &quot;t2.micro&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  vpc_security_group_ids = [each.id]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  vpc_security_group_ids = [each.value]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  user_data              = &lt;&lt;-EOF</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">              #!/bin/bash</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">              apt-get update</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">              apt-get install -y apache2</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">              sed -i -e &#x27;s/80/8080/&#x27; /etc/apache2/ports.conf</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">              echo &quot;Hello World&quot; &gt; /var/www/html/index.html</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">              systemctl restart apache2</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">              EOF</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  tags = {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   Name = &quot;${var.name}-learn&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> Name = &quot;${var.name}-learn-${each.key}&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">}<!-- -->
</span></span></span></code></pre></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Define the local value in your <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">main.tf</code> file. This converts the list of security groups to a map.</p><div class="g-code-block style_root__rglDp language-hcl mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token keyword">locals</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"> <span class="token property">security_groups</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"> <span class="token property">sg_ping</span> <span class="token punctuation">=</span> aws_security_group.sg_ping.id,<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"> <span class="token property">sg_8080</span> <span class="token punctuation">=</span> aws_security_group.sg_8080.id,<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"> <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Format your configuration.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform <span class="token function">fmt</span></span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">main.tf</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Your next <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform validate</code> operation will produce errors output errors because of the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for_each</code> value you corrected. Your outputs do not capture the multiple instances in the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_instance.web_app</code> resources.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Validate your configuration to return the output errors.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform validate</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> Error: Missing resource instance key</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> on outputs.tf line 3, in output &quot;instance_id&quot;:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> 3: value = aws_instance.web_app.id</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> Because aws_instance.web_app has &quot;for_each&quot; set, its attributes must be</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> accessed on specific instances.</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> For example, to correlate with indices of a referring resource, use:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> aws_instance.web_app[each.key]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> Error: Missing resource instance key</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> on outputs.tf line 8, in output &quot;instance_public_ip&quot;:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> 8: value = aws_instance.web_app.public_ip</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> Because aws_instance.web_app has &quot;for_each&quot; set, its attributes must be</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> accessed on specific instances.</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> For example, to correlate with indices of a referring resource, use:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> aws_instance.web_app[each.key]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> Error: Missing resource instance key</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> on outputs.tf line 13, in output &quot;instance_name&quot;:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> 13: value = aws_instance.web_app.tags</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> Because aws_instance.web_app has &quot;for_each&quot; set, its attributes must be</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> accessed on specific instances.</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> For example, to correlate with indices of a referring resource, use:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> aws_instance.web_app[each.key]</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In the next section, you will correct these errors by implementing a <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for</code> expression to define outputs with lists of your instance IDs, IP addresses, and names.</p><h2 id="correct-your-outputs-to-return-all-values" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="correct your outputs to return all values permalink" href="#correct-your-outputs-to-return-all-values"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Correct your outputs to return all values</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">To correct your outputs, you need the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for</code> expression to capture the elements of the multiple resources.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for</code> expression captures all of the elements of <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">aws_instance.web_app</code> in a temporary variable called <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">instance</code>. Then, Terraform returns all of the specified values of the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">instance</code> elements. In this example, <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">instance.id</code>, <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">instance.public_ip</code>, and <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">instance.tags.Name</code> return every matching key value for each instance you created.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Open <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">outputs.tf</code> and update the output values with the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">for</code> expression.</p><div class="g-code-block style_root__rglDp language-diff mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-diff mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">output &quot;instance_id&quot; {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> description = &quot;ID of the EC2 instance&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> value = aws_instance.web_app.id</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> value = [for instance in aws_instance.web_app: instance.id]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">output &quot;instance_public_ip&quot; {</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> description = &quot;Public IP address of the EC2 instance&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> value = aws_instance.web_app.public_ip</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> value = [for instance in aws_instance.web_app: instance.public_ip]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">
</span><span class="style_LineOfCode__Y9D6q g-type-code">output &quot;instance_name&quot; {<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> description = &quot;Tags of the EC2 instance&quot;</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> value = aws_instance.web_app.tags</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> value = [for instance in aws_instance.web_app: instance.tags.Name]</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code">}<!-- -->
</span></span></span></code></pre></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Format your configuration.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform <span class="token function">fmt</span></span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">outputs.tf</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Validate your configuration</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform validate</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Success! The configuration is valid.</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h2 id="apply-your-changes" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow __permalink-h mdx-heading-permalink_h2___xzUm" aria-label="apply your changes permalink" href="#apply-your-changes"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Apply your changes</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Now that you have corrected the Terraform configuration, run <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform apply</code> to create your resources. Enter <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">yes</code> when prompted to confirm your changes.</p><div class="g-code-block style_root__rglDp language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-shell-session mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform apply</span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token command"><span class="token shell-symbol important">#</span><span class="token bash language-bash"><span class="token comment"># ...</span></span></span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group.sg_ping: Creating...</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group.sg_8080: Creating...</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group.sg_8080: Creation complete after 2s [id=sg-0873a757459ff5624]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group.sg_ping: Creation complete after 2s [id=sg-031ca2ce9451c8e1b]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group_rule.allow_8080: Creating...</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group_rule.allow_ping: Creating...</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_ping&quot;]: Creating...</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_8080&quot;]: Creating...</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group_rule.allow_ping: Creation complete after 6s [id=sgrule-248610662]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_security_group_rule.allow_8080: Creation complete after 6s [id=sgrule-4095686676]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_ping&quot;]: Still creating... [10s elapsed]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_8080&quot;]: Still creating... [10s elapsed]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_8080&quot;]: Still creating... [20s elapsed]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_ping&quot;]: Still creating... [20s elapsed]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_ping&quot;]: Creation complete after 24s [id=i-02bd8b86bfa93ae96]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">aws_instance.web_app[&quot;sg_8080&quot;]: Creation complete after 24s [id=i-0a679d5acef2b8e01]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Apply complete! Resources: 6 added, 0 changed, 0 destroyed.</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">Outputs:</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">instance_id = [</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> &quot;i-0a679d5acef2b8e01&quot;,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> &quot;i-02bd8b86bfa93ae96&quot;,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">instance_name = [</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> &quot;terraform-learn-sg_8080&quot;,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> &quot;terraform-learn-sg_ping&quot;,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">instance_public_ip = [</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> &quot;13.58.116.31&quot;,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output"> &quot;3.131.82.166&quot;,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token output">]</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"></div>
